---
title: 建立內容片段模型 — AEM Headless的進階概念 — GraphQL
description: 在Adobe Experience Manager (AEM) Headless的進階概念的本章中，瞭解如何透過新增索引標籤預留位置、日期和時間、JSON物件、片段參照和內容參照來編輯內容片段模型。
version: Cloud Service
feature: Content Fragments, GraphQL API
topic: Headless, Content Management
role: Developer
level: Intermediate
exl-id: 2122ab13-f9df-4f36-9c7e-8980033c3b10
duration: 884
source-git-commit: af928e60410022f12207082467d3bd9b818af59d
workflow-type: tm+mt
source-wordcount: '1991'
ht-degree: 1%

---

# 建立內容片段模型 {#create-content-fragment-models}

本章將逐步說明建立五個內容片段模型的步驟：

* **聯絡資訊**
* **地址**
* **人員**
* **位置**
* **團隊**

內容片段模型允許定義內容型別之間的關係並持續如結構描述這樣的關係。 使用巢狀片段參考、各種內容資料型別和視覺內容組織的索引標籤型別。 更進階的資料型別，例如Tab預留位置、片段參考、JSON物件和日期與時間資料型別。

本章也涵蓋如何增強內容參照（例如影像）的驗證規則。

## 先決條件 {#prerequisites}

這是進階教學課程。 繼續進行本章之前，請確定您已完成 [快速設定](../quick-setup/cloud-service.md). 請確定您也閱讀了前面 [概述](../overview.md) 章節，以瞭解進階教學課程設定的詳細資訊。

## 目標 {#objectives}

* 建立內容片段模型。
* 將索引標籤預留位置、日期和時間、JSON物件、片段參照和內容參照新增至模型。
* 將驗證新增至內容參考。

## 內容片段模型概觀 {#content-fragment-model-overview}

以下影片簡要介紹內容片段模型，以及在本教學課程中如何使用它們。

>[!VIDEO](https://video.tv.adobe.com/v/340037?quality=12&learn=on)

## 建立內容片段模型 {#create-models}

讓我們為WKND應用程式建立一些內容片段模型。 如果您需要有關建立內容片段模式的基本介紹，請參閱 [基本教學課程](../multi-step/content-fragment-models.md).

1. 瀏覽至 **工具** > **一般** > **內容片段模型**.

   ![內容片段模型路徑](assets/define-content-fragment-models/content-fragment-models-path.png)

1. 選取 **WKND已共用** 以檢視網站的現有內容片段模型清單。

### 連絡人資訊模型 {#contact-info-model}

接著，建立包含人員或地點之聯絡資訊的模型。

1. 選取 **建立** 在右上角。

1. 將模型標題命名為「聯絡資訊」，然後選取 **建立**. 在出現的成功模式中，選取 **開啟** 以編輯新建立的模型。

1. 從拖曳開始 **單行文字** 欄位至模型。 將其授予 **欄位標籤** 中的「Phone」 **屬性** 標籤。 屬性名稱會自動填寫為 `phone`. 選取核取方塊以產生欄位 **必填**.

1. 導覽至 **資料型別** 標籤，然後新增另一個 **單行文字** 「電話」欄位下方的欄位。 將其授予 **欄位標籤** 「電子郵件」的縮寫，並將其設為 **必填**.

Adobe Experience Manager隨附一些內建的驗證方法。 這些驗證方法可讓您將治理規則新增到內容片段模式中的特定欄位。 在這種情況下，讓我們新增驗證規則，以確保使用者在填寫此欄位時只能輸入有效的電子郵件地址。 在 **驗證型別** 下拉式清單，選取 **電子郵件**.

您完成的內容片段模型應如下所示：

![連絡人資訊模型路徑](assets/define-content-fragment-models/contact-info-model.png)

完成後，選取 **儲存** 以確認您的變更並關閉內容片段模式編輯器。

### 地址模型 {#address-model}

接下來，建立地址的模型。

1. 從 **WKND已共用**，選取 **建立** 從右上角。

1. 輸入「地址」的標題，然後選取 **建立**. 在出現的成功模式中，選取 **開啟** 以編輯新建立的模型。

1. 拖放 **單行文字** 將欄位新增至模型，並賦予模型 **欄位標籤** 「街道地址」的URL。 然後，屬性名稱會填寫為 `streetAddress`. 選取 **必填** 核取方塊。

1. 重複上述步驟，再新增四個「單行文字」欄位至模型。 使用下列標籤：

   * 城市
   * 狀態
   * 郵遞區號
   * 國家/地區

1. 選取 **儲存** 以儲存對地址模型的變更。

   完成的「位址」片段模型應如下所示：
   ![地址模型](assets/define-content-fragment-models/address-model.png)

### 個人模型 {#person-model}

接下來，建立包含個人相關資訊的模型。

1. 在右上角，選取 **建立**.

1. 將模型標題命名為「Person」，然後選取 **建立**. 在出現的成功模式中，選取 **開啟** 以編輯新建立的模型。

1. 從拖曳開始 **單行文字** 欄位至模型。 將其授予 **欄位標籤** 「全名」的URL名稱。 屬性名稱會自動填寫為 `fullName`. 選取核取方塊以產生欄位 **必填**.

   ![全名選項](assets/define-content-fragment-models/full-name.png)

1. 內容片段模式可在其他模式中參照。 導覽至 **資料型別** 標籤，然後拖放 **片段引用** 欄位，並為它提供「聯絡資訊」標籤。

1. 在 **屬性** 標籤，在 **允許的內容片段模型** 欄位，選取資料夾圖示，然後選擇 **聯絡資訊** 片段模式先前建立。

1. 新增 **內容參考** 欄位並賦予 **欄位標籤** 「個人資料圖片」的。 選取下方的資料夾圖示 **根路徑** 以開啟路徑選取強制回應視窗。 選取「 」，選取根路徑 **內容** > **資產**，然後選取的核取方塊 **WKND已共用**. 使用 **選取** 按鈕來儲存路徑。 最終文字路徑應為 `/content/dam/wknd-shared`.

   ![內容參考根路徑](assets/define-content-fragment-models/content-reference-root-path.png)

1. 在 **僅接受指定的內容型別**，選取「影像」。

   ![個人資料圖片選項](assets/define-content-fragment-models/profile-picture.png)

1. 若要限制影像檔案的大小和尺寸，讓我們來看看內容參考欄位的一些驗證選項。

   在 **僅接受指定的檔案大小**，選取「小於或等於」，其他欄位會顯示在下方。
   ![僅接受指定的檔案大小](assets/define-content-fragment-models/accept-specified-file-size.png)

1. 的 **最大**，輸入&quot;5&quot;，並針對 **選取單位**，選取「百萬位元組(MB)」。 此驗證僅允許選擇指定大小的影像。

1. 在 **僅接受指定的影像寬度**，選取「最大寬度」。 在 **最大（畫素）** 在出現的欄位中輸入「10000」。 為以下專案選取相同選項 **僅接受指定的影像高度**.

   這些驗證可確保新增的影像不超過指定的值。 驗證規則現在看起來應該像這樣：

   ![內容參考驗證規則](assets/define-content-fragment-models/content-reference-validation.png)

1. 新增 **多行文字** 欄位並賦予 **欄位標籤** 《傳記》的封面。 離開 **預設型別** 下拉式清單作為預設的「RTF格式」選項。

   ![履歷選項](assets/define-content-fragment-models/biography.png)

1. 導覽至 **資料型別** 標籤，然後拖曳 **分項清單** 「傳記」底下的欄位。 代替預設值 **呈現為** 選項，選取 **下拉式清單** 並賦予 **欄位標籤** （「講師經驗層級」）。 輸入一系列講師體驗層級選項，例如 _專家、進階、中級_.

1. 接下來，拖曳另一個 **分項清單** 欄位選至「講師經驗層級」下，然後選擇「核取方塊」(位於 **呈現為** 選項。 將其授予 **欄位標籤** 的「技能」部分。 輸入攀巖、衝浪、騎腳踏車、滑雪和揹包等各種技能。 選項標籤和選項值應符合以下內容：

   ![技能分項清單](assets/define-content-fragment-models/skills-enum.png)

1. 最後，使用建立「管理員詳細資訊」欄位標籤 **多行文字** 欄位。

選取 **儲存** 以確認您的變更並關閉內容片段模式編輯器。

### 位置模型 {#location-model}

下一個內容片段模型說明實體位置。 此模型使用定位字元預留位置。 索引標籤預留位置可透過分類內容，協助您分別在模型編輯器和片段編輯器中組織資料型別。 每個預留位置都會在內容片段編輯器中建立一個標籤，類似於網際網路瀏覽器中的標籤。 「位置」模型應該有兩個標籤：「位置詳細資料」和「位置地址」。

1. 和之前一樣，選取 **建立** 以建立另一個內容片段模式。 在「模型標題」中，輸入「位置」。 選取 **建立** 後面接著 **開啟** 在出現的成功強制回應視窗中。

1. 新增 **索引標籤預留位置** 欄位並標示為「位置詳細資料」。

1. 拖放 **單行文字** 並標示為「名稱」。 在此欄位標籤下方，新增 **多行文字** 欄位並加上標籤「說明」。

1. 接下來，新增 **片段引用** 欄位並標示為「聯絡人資訊」。 在屬性標籤的下方 **允許的內容片段模型**，選取 **資料夾圖示** 並選擇先前建立的「聯絡資訊」片段模式。

1. 新增 **內容參考** 欄位中的「聯絡資訊」下。 將其標示為「位置影像」。 此 **根路徑** 應為 `/content/dam/wknd-shared.` 在 **僅接受指定的內容型別**，選取「影像」。

1. 我們也要新增 **json物件** 「位置影像」下的欄位。 由於此資料型別有彈性，因此可用來顯示您要納入內容的任何資料。 在此情況下，會使用JSON物件來顯示天氣相關資訊。 將JSON物件標示為「依季節顯示天氣」。 在 **屬性** 標籤，新增 **說明** 因此使用者很清楚應在此處輸入哪些資料：「關於各個季節（春季、夏季、秋季、冬季）之事件位置天氣的JSON資料」。

   ![json物件選項](assets/define-content-fragment-models/json-object.png)

1. 若要建立「位置地址」標籤，請新增 **索引標籤預留位置** 欄位並標示為「位置地址」。

1. 拖放 **片段引用** 欄位，在屬性索引標籤中，將其標示為「Address」，然後在 **允許的內容片段模型**，選取 **地址** 模型。

1. 選取 **儲存** 以確認您的變更並關閉內容片段模式編輯器。 已完成的「位置」模型應如下所示：

   ![內容參考選項](assets/define-content-fragment-models/location-model.png)

### 團隊模型 {#team-model}

最後，建立可描述團隊人員的模型。

1. 從 **WKND已共用** 頁面，選取 **建立** 製作另一個內容片段模型。 在「模型標題」中，輸入「團隊」。 和之前一樣，選取 **建立** 後面接著 **開啟** 在出現的成功強制回應視窗中。

1. 新增 **多行文字** 表格中的欄位。 在 **欄位標籤**，輸入「Description」。

1. 新增 **日期和時間** 欄位至模型，並標示為「團隊建立日期」。 在此情況下，請保留預設值 **型別** 設為「Date」，但請注意，也可以使用「Date &amp; Time」或「Time」。

   ![日期和時間選項](assets/define-content-fragment-models/date-and-time.png)

1. 導覽至 **資料型別** 標籤。 在「團隊建立日期」下方，新增 **片段引用**. 在 **呈現為** 在下拉式清單中選取「多欄位」。 的 **欄位標籤**，輸入「團隊成員」。 此欄位連結至 _個人_ 先前建立的模型。 由於資料型別是多欄位，因此可以新增多個人員片段，以建立人員團隊。

   ![片段參考選項](assets/define-content-fragment-models/fragment-reference.png)

1. 在 **允許的內容片段模型**，使用資料夾圖示以開啟「選取路徑」強制回應視窗，然後選取 **個人** 模型。 使用 **選取** 按鈕以儲存路徑。

   ![選取人員模型](assets/define-content-fragment-models/select-person-model.png)

1. 選取 **儲存** 以確認您的變更並關閉內容片段模式編輯器。

## 新增片段參考至冒險模型 {#fragment-references}

如同「團隊」模式具有參照「人員」模式的片段參照，也必須參照「冒險」模式中的「團隊」和「位置」模式，才能在WKND應用程式中顯示這些新模式。

1. 從 **WKND已共用** 頁面，選取 **冒險** 模型，然後選取 **編輯** 從頂端導覽列中。

   ![冒險編輯路徑](assets/define-content-fragment-models/adventure-edit-path.png)

1. 在表單底部的「帶什麼」下方，新增 **片段引用** 欄位。 輸入 **欄位標籤** 的URL名稱。 在 **允許的內容片段模型**，選取 **位置** 模型。

   ![位置片段參考選項](assets/define-content-fragment-models/location-fragment-reference.png)

1. 再新增一個 **片段引用** 欄位並標示為「講師團隊」。 在 **允許的內容片段模型**，選取 **團隊** 模型。

   ![團隊片段參考選項](assets/define-content-fragment-models/team-fragment-reference.png)

1. 新增另一個 **片段引用** 欄位並加上標籤「管理員」。

   ![管理員片段參考選項](assets/define-content-fragment-models/administrator-fragment-reference.png)

1. 選取 **儲存** 以確認您的變更並關閉內容片段模式編輯器。

## 最佳做法 {#best-practices}

關於建立內容片段模型，有幾個最佳實務准則：

* 建立對應至UX元件的模型。 例如，WKND應用程式具有適用於冒險、文章和位置的內容片段模型。 您也可以新增標題、促銷活動或免責宣告。 這些範例每個都組成特定的UX元件。

* 建立儘可能少的模型。 限制模型數量可讓您最大化重複使用並簡化內容管理。

* 視需要深度巢狀內嵌內容片段模型，但僅視需要而定。 回想一下，巢狀內嵌是使用片段參考或內容參考完成的。 最多考慮五個巢狀層級。

## 恭喜！ {#congratulations}

恭喜！您現在已新增標籤、使用日期和時間以及JSON物件資料型別，並瞭解更多有關片段和內容參照的資訊。 您也新增了內容參考驗證規則。

## 後續步驟 {#next-steps}

本系列的下一章將涵蓋 [製作內容片段](/help/headless-tutorial/graphql/advanced-graphql/author-content-fragments.md) 您在本章建立的模型。 瞭解如何使用本章介紹的資料型別並建立檔案夾原則以限制可在資產檔案夾中建立的內容片段模型。

雖然本教學課程可選擇使用，但請務必在真實世界生產環境中發佈所有內容。 如需AEM中製作和發佈環境的稽核，請參閱
[AEM Headless和GraphQL影片系列](/help/headless-tutorial/graphql/video-series/author-publish-architecture.md).
